# 更新日志

## [1.2.0] - 2024-12-19

### 新增功能

#### 工具列表请求支持
- 小智端现在可以通过WebSocket请求获取所有可用工具列表
- 支持 `tools/list` 方法，返回统一格式的工具列表
- 每个工具包含 `server_id` 标识，便于识别工具来源

#### 智能工具调用路由
- 支持 `tools/call` 方法，根据工具名称自动路由到正确的MCP服务器
- 自动查找工具对应的服务器并进行转发
- 完善的错误处理，包括工具不存在、服务器未连接等错误

#### 增强的聚合响应
- 改进聚合响应机制，支持不同类型的响应聚合
- 优化响应格式，包含服务器统计信息
- 支持工具列表和内容响应的聚合

#### 改进的健康检查
- 健康检查接口现在包含详细的连接统计信息
- 显示每个智能体的服务器数量和工具数量
- 支持多服务器状态监控

### 技术改进

#### 连接管理器优化
- 改进工具列表管理，支持动态更新
- 优化服务器查找和路由逻辑
- 增强错误处理和日志记录

#### WebSocket处理器增强
- 新增工具列表请求处理逻辑
- 新增工具调用请求处理逻辑
- 改进消息转发和响应处理

#### 错误处理完善
- 新增详细的错误码定义
- 改进错误响应格式
- 增强错误日志记录

### 文档更新

- 更新 README.md，反映新功能特性
- 更新 README_multi_server.md，详细说明多服务器功能
- 更新 USAGE_GUIDE.md，提供完整的使用指南
- 更新 ARCHITECTURE_SUMMARY.md，说明架构设计

### 测试改进

- 更新测试脚本，验证新功能
- 增加工具列表请求测试
- 增加工具调用路由测试
- 改进错误处理测试

## [1.1.0] - 2024-12-18

### 新增功能

#### 多服务器支持
- 支持一个智能体连接多个MCP服务器
- 统一工具管理和调用
- 智能路由和聚合响应

#### 连接管理
- 改进连接管理器，支持多服务器连接
- 自动清理断开的连接
- 连接统计和监控

### 技术改进

- 异步处理优化
- 错误处理完善
- 日志记录增强

## [1.0.0] - 2024-12-17

### 初始版本

- 基础WebSocket服务器功能
- MCP服务器和小智端连接支持
- 消息转发功能
- 基础监控和健康检查 